@{
    ViewData["Title"] = "Asset Detail";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb breadcrumb-alt">
                <li class="breadcrumb-item">
                    <a class="link-fx" href="@Url.Action("Index", "Review")">Review Assets</a>
                </li>
                <li class="breadcrumb-item active" aria-current="page">Asset Detail</li>
            </ol>
        </nav>
        <h2 class="content-heading mb-0">
            <i class="fa fa-cube me-2"></i><span id="assetDetailTitle">Asset Detail</span>
        </h2>
    </div>
    <div>
        <a href="@Url.Action("Index", "Review")" class="btn btn-alt-secondary">
            <i class="fa fa-arrow-left me-1"></i> Back to Review
        </a>
    </div>
</div>

<!-- Loading Indicator -->
<div id="loadingIndicator" class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-2 text-muted">Loading asset details...</p>
</div>

<!-- Asset Detail Content -->
<div id="assetDetailContent" style="display: none;">
    <!-- Header with View Toggle -->
    <div class="block block-rounded">
        <div class="block-header block-header-default">
            <h3 class="block-title">Asset Details</h3>
            @* <div class="block-options">
                <div class="btn-group me-3" role="group" aria-label="View Toggle">
                    <button type="button" class="btn btn-sm btn-primary" id="cardViewBtn" title="Card View">
                        <i class="fa fa-th-large"></i> Card
                    </button>
                    <button type="button" class="btn btn-sm btn-outline-primary" id="listViewBtn" title="List View">
                        <i class="fa fa-list"></i> List
                    </button>
                </div>
            </div> *@
        </div>
        <div class="block-content">
            <!-- Pagination Info and Size Selector -->
            <div class="row mb-3">
                <div class="col-md-6">
                    <p class="text-muted mb-0" id="paginationInfo">Loading...</p>
                </div>
                <div class="col-md-6 text-end">
                    <select class="form-select" id="pageSizeSelect" style="width: auto; display: inline-block;">
                        <option value="5">5 per page</option>
                        <option value="10">10 per page</option>
                        <option value="30">30 per page</option>
                        <option value="50">50 per page</option>
                        <option value="100">100 per page</option>
                    </select>
                </div>
            </div>
            
            <!-- Card View Container -->
            <div id="cardView">
                <div class="row" id="assetDetailsContainer">
                    <!-- Asset details will be loaded here -->
                    <div class="col-12 text-center text-muted">
                        <p>Loading asset details...</p>
                    </div>
                </div>
            </div>
            
            <!-- List View Container -->
            <div id="listView" style="display: none;">
                <div class="table-responsive">
                    <table class="table table-bordered table-striped table-vcenter" id="assetDetailsTable">
                        <thead class="text-center bg-light">
                            <tr>
                                <th>Asset #</th>
                                <th>Status</th>
                                <th>Foto</th>
                                <th>Nama Barang</th>
                                <th>Kode</th>
                                <th>Nomor Asset</th>
                                <th>Kategori</th>
                                <th>Qty</th>
                                <th>PO Number</th>
                                <th>District</th>
                                <th>Tanggal Masuk</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Table rows will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Pagination -->
            <div class="row mt-3">
                <div class="col-12">
                    <nav aria-label="Asset details pagination">
                        <ul class="pagination justify-content-center" id="paginationNav">
                            <!-- Pagination buttons will be generated here -->
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Error Message -->
<div id="errorMessage" class="alert alert-danger" style="display: none;">
    <i class="fa fa-exclamation-triangle me-2"></i>
    <span id="errorText">Failed to load asset details. Please try again.</span>
</div>

@section Scripts {
    <script src="~/js/ReviewAssetDetail.js"></script>
    <script>
        $(document).ready(function() {
            const urlParams = new URLSearchParams(window.location.search);
            const kodeBarang = urlParams.get('kode');
            const nomorAsset = urlParams.get('nomor');
            
            if (kodeBarang && nomorAsset) {
                ReviewAssetDetail.init(kodeBarang, nomorAsset);
            } else {
                $('#loadingIndicator').hide();
                $('#errorMessage').show();
                $('#errorText').text('Invalid parameters. Asset code and number are required.');
            }
        });
    </script>
}